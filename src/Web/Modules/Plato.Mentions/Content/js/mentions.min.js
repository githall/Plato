if(typeof jQuery=="undefined")throw new Error("jQuery 3.3.1 or above Required");if(typeof window.$.Plato=="undefined")throw new Error("$.Plato Required");if(typeof window.$.fn.platoUI=="undefined")throw new Error("$.Plato UI Required");$(function(n,t,i){"use strict";var r=n.$.Plato,u=function(){var t="mentions",f=t+"Id",r={},u={init:function(n,t){if(t){this[t]?this[t].apply(this,[n]):alert(t+" is not a valid method!");return}this.bind(n)},bind:function(u){u.suggester(i.extend(u.data(t)),{keys:[{match:/(^|\s|\()(@([a-z0-9\-_/]*))$/i,search:function(n,t){for(var r=n.val().split(""),f=null,u=-1,e=t.start-1,i=e;i>=0;i--)if(r[i]==="@"){u=i;break}else if(r[i]==="\n"||r[i]===" ")break;if(u>=0)for(f="",i=u;i<=r.length-1;i++){if(r[i]==="\n"||r[i]===" ")break;f+=r[i]}return{startIndex:u,value:f}},bind:function(t,i){var r=i.value;r&&(r.substring(0,1)==="@"&&(r=r.substring(1,r.length)),u.suggester({page:1,pageSize:5,itemSelection:{enable:!0,index:0,css:"active"},valueField:"keywords",config:{method:"GET",url:n.$.Plato.defaults.pathBase+"/api/users/get?page={page}&size={pageSize}&keywords="+encodeURIComponent(r),data:{sort:"LastLoginDate",order:"Desc"}},itemCss:"dropdown-item",itemTemplate:'<a class="{itemCss}" href="{url}"><span class="avatar avatar-sm mr-2"><span style="background-image: url({avatar.url});"><\/span><\/span><span class="d-inline-block text-truncate w-50" title="{displayName}">{displayName}<\/span><span class="float-right d-inline-block text-truncate max-w-100 text-right" title="@{userName}">@{userName}<\/span><\/a>',parseItemTemplate:function(n,t){return n=t.id?n.replace(/\{id}/g,t.id):n.replace(/\{id}/g,"0"),n=t.displayName?n.replace(/\{displayName}/g,t.displayName):n.replace(/\{displayName}/g,"(no username)"),n=t.userName?n.replace(/\{userName}/g,t.userName):n.replace(/\{userName}/g,"(no username)"),t.avatar&&(n=t.avatar.url?n.replace(/\{avatar.url}/g,t.avatar.url):n.replace(/\{avatar.url}/g,"#")),n},onPagerClick:function(n,t,i){i.preventDefault();i.stopPropagation();u.suggester({page:t},"show")},onItemClick:function(n,t,r){r.preventDefault();u.focus().suggester("hide").suggester({insertData:{index:i.startIndex,value:t.userName}},"insert")}},"show"))},unbind:function(){u.suggester("hide")}}]},r)}};return{init:function(){for(var e,h,o={},n=null,s=0;s<arguments.length;++s)if(e=arguments[s],e)switch(e.constructor){case Object:i.extend(o,e);break;case String:n=e}if(this.length>0)return this.each(function(){if(i(this).data(f))i(this).data(t,i.extend({},i(this).data(t),o));else{var e=t+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(f,e);i(this).data(t,i.extend({},r,o))}u.init(i(this),n)});n&&(u[n]?(h=i("body"),h.data(t,i.extend({},r,o)),u[n].apply(this,[h])):alert(n+" is not a valid method!"))}}}();i.fn.extend({mentions:u.init});r.ready(function(){i('[data-provide="mentions"]').mentions();i(".md-textarea").mentions();i(".md-textarea").keyBinder("bind")})}(window,document,jQuery));