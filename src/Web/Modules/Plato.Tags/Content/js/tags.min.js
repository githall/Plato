if(typeof jQuery=="undefined")throw new Error("jQuery 3.3.1 or above Required");if(typeof window.$.Plato=="undefined")throw new Error("$.Plato Required");if(typeof window.$.fn.platoUI=="undefined")throw new Error("$.Plato UI Required");$(function(n,t,i){"use strict";var r=n.$.Plato,u=function(n){var t="tagTagIt",e=t+"Id",f={maxItems:5},u={init:function(n,t,i){if(i)return i(this);if(t)return this[t]!==null&&typeof this[t]!="undefined"?this[t].apply(this,[n]):alert(t+" is not a valid method!"),null;this.bind(n)},bind:function(t){var e=u.getMaxItems(t),o=u.getFeatureId(t);t.tagIt(i.extend({maxItems:e,itemTemplate:'<li class="tagit-list-item"><div class="btn-group"><div class="btn btn-sm label label-outline font-weight-bold">{name}<\/div><a href="#" class="btn btn-sm label label-outline dropdown-toggle-split tagit-list-item-delete"><i class="fal fa-times"><\/i><\/a><\/div><\/li>',parseItemTemplate:function(n,t){return n=t.id?n.replace(/\{id}/g,t.id):n.replace(/\{id}/g,"0"),t.name?n.replace(/\{name}/g,r.text.htmlEncode(t.name)):n.replace(/\{name}/g,"")},onAddItem:function(n){n.val("")}},f,n));u.getInput(t).tagAutoComplete(i.extend({onItemClick:function(n,i,r){var f,o;r.preventDefault();f=u.getIndex(t,i);f===-1?(o=e>0&&t.data("tagIt").items.length<e,o?(t.data("tagIt").items.push(i),t.tagIt("update").tagIt("focus").tagIt("reset").tagIt("show"),t.data("tagIt").items.length>=e&&t.tagIt("hide")):t.tagIt("hide")):t.tagIt({highlightIndex:f},"highlight")},onKeyDown:function(n,r){var v=!r.shiftKey&&!r.ctrlKey,w=v&&r.keyCode===188,b=v&&r.keyCode===13,o,s,f,h,y,c,l,a,p;if(b|w){if(r.preventDefault(),o=n.data("autocompleteTarget")||t.data("autoComplete").target,s=!1,o!==null&&(f=i(o),f&&f.data("pagedList")&&(h=f.data("pagedList").itemCss,y=f.data("pagedList").itemSelection,h&&f.find("."+h).each(function(){if(i(this).hasClass(y.css)){s=!0;return}}))),s)return;if(c=n.val(),c==="")return;l={id:0,name:c};a=u.getIndex(t,l);a===-1?(p=e>0&&t.data("tagIt").items.length<e,p?(t.data("tagIt").items.push(l),t.tagIt("update").tagIt("reset").tagIt("focus"),t.data("tagIt").items.length>=e&&t.tagIt("hide")):t.tagIt("hide")):t.tagIt({highlightIndex:a},"highlight")}}},f,n))},getInput:function(n){return n.find(".tagit-list-item-input").find("input")},getIndex:function(n,t){var f=n.data("tagIt").ensureUnique,u=n.data("tagIt").items,r=-1,i;if(f===!1)return r;for(i=0;i<u.length;i++)t.name===u[i].name&&(r=i);return r},getMaxItems:function(n){return n.data("maxItems")?parseInt(n.data("maxItems")):n.data(t).maxItems},getFeatureId:function(n){return n.data("featureId")?parseInt(n.data("featureId")):n.data(t).maxItems}};return{init:function(){for(var o,h,r={},n=null,s=0;s<arguments.length;++s){o=arguments[s];switch(o.constructor){case Object:i.extend(r,o);break;case String:n=o}}if(this.length>0)return this.each(function(){if(i(this).data(e))i(this).data(t,i.extend({},i(this).data(t),r));else{var o=t+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(e,o);i(this).data(t,i.extend({},f,r))}u.init(i(this),n)});n&&(u[n]?(h=i("body"),h.data(t,i.extend({},f,r)),u[n].apply(this,[h])):alert(n+" is not a valid method!"))}}}(),f=function(){var t="tagAutoComplete",f=t+"Id",e={valueField:"keywords",page:1,pageSize:5,config:{method:"POST",url:n.$.Plato.defaults.pathBase+"/api/tags/search",data:{keywords:"",featureId:0,sort:"TotalEntities",order:"Desc"}},itemTemplate:'<a class="{itemCss}" href="{url}">{entities}{name}<\/a>',parseItemTemplate:function(n,t){return n=t.id?n.replace(/\{id}/g,t.id):n.replace(/\{id}/g,"0"),n=t.name?n.replace(/\{name}/g,r.text.htmlEncode(t.name)):n.replace(/\{name}/g,"(no name)"),n=t.entities&&t.entities>0?n.replace(/\{entities}/g,'<span data-toggle="tooltip" title="'+r.T("Occurences")+'" class="float-right badge badge-primary">'+t.entities+"<\/span>"):n.replace(/\{entities}/g,""),n=t.follows&&t.follows>0?n.replace(/\{follows}/g,'<span data-toggle="tooltip" title="'+r.T("Followers")+'" class="float-right badge badge-primary ml-1">'+t.follows+"<\/span>"):n.replace(/\{follows}/g,""),t.url?n.replace(/\{url}/g,t.url):n.replace(/\{url}/g,"#")},onKeyDown:function(n,t){t.keyCode===13&&t.preventDefault()},onItemClick:function(n,t,i){i.preventDefault()}},u={init:function(n,i,r){if(r)return r(this);if(i)return this[i]!==null&&typeof this[i]!="undefined"?this[i].apply(this,[n]):alert(i+" is not a valid method!"),null;n.data("featureId")&&(n.data(t).config.method.toUpperCase()==="GET"&&(n.data(t).config.url=config.url.replace("{featureId}",n.data("featureId"))),n.data(t).config.method.toUpperCase()==="POST"&&(n.data(t).config.data.featureId=n.data("featureId")));n.autoComplete(n.data(t),i)},show:function(n){n.autoComplete("show")}};return{init:function(){for(var r,h,o={},n=null,s=0;s<arguments.length;++s)if(r=arguments[s],r)switch(r.constructor){case Object:i.extend(o,r);break;case String:n=r}if(this.length>0)return this.each(function(){if(i(this).data(f))i(this).data(t,i.extend({},i(this).data(t),o));else{var r=t+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(f,r);i(this).data(t,i.extend({},e,o))}u.init(i(this),n)});n&&(u[n]?(h=i("body"),h.data(t,i.extend({},e,o)),u[n].apply(this,[h])):alert(n+" is not a valid method!"))}}}();i.fn.extend({tagTagIt:u.init,tagAutoComplete:f.init});r.ready(function(){i('[data-provide="tagTagIt"]').tagTagIt();i('[data-provide="tagsAutoComplete"]').tagAutoComplete()})}(window,document,jQuery));