if(typeof jQuery=="undefined")throw new Error("Plato requires jQuery");if(typeof $.Plato=="undefined")throw new Error("$.Plato Required");$(function(n,t,i){"use strict";var r=n.$.Plato,u=function(){var n="followToggle",r=n+"Id",u={onCss:null,offCss:null,onIcon:"fa fa-bell",offIcon:"fal fa-bell"},t={init:function(n,t){if(t){this[t]?this[t].apply(this,[n]):alert(t+" is not a valid method!");return}},enable:function(t){var i=t.data("onCss")||t.data(n).onCss,r=t.data("offCss")||t.data(n).offCss,u=t.data("offIcon")||t.data(n).offIcon,f=t.data("onIcon")||t.data(n).onIcon;t.removeClass(r).addClass(i).attr("data-action","unsubscribe");t.find("i").removeClass(u).addClass(f);t.tooltip&&t.tooltip("hide");t.attr("data-unsubscribe-tooltip")&&(t.tooltip?t.attr("data-original-title",t.attr("data-unsubscribe-tooltip")):t.attr("title",t.attr("data-unsubscribe-tooltip")));t.find("span").text(t.attr("data-unsubscribe-text"))},disable:function(t){var i=t.data("onCss")||t.data(n).onCss,r=t.data("offCss")||t.data(n).offCss,u=t.data("offIcon")||t.data(n).offIcon,f=t.data("onIcon")||t.data(n).onIcon;i&&t.removeClass(i);r&&t.addClass(r);t.attr("data-action","subscribe");t.find("i").removeClass(f).addClass(u);t.tooltip&&t.tooltip("hide");t.attr("data-subscribe-tooltip")&&(t.tooltip?t.attr("data-original-title",t.attr("data-subscribe-tooltip")):t.attr("title",t.attr("data-subscribe-tooltip")));t.find("span").text(t.attr("data-subscribe-text"))}};return{init:function(){for(var o,h,e={},f=null,s=0;s<arguments.length;++s){o=arguments[s];switch(o.constructor){case Object:i.extend(e,o);break;case String:f=o}}if(this.length>0)return this.each(function(){if(i(this).data(r))i(this).data(n,i.extend({},i(this).data(n),e));else{var o=n+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(r,o);i(this).data(n,i.extend({},u,e))}t.init(i(this),f)});f&&(t[f]?(h=i("body"),h.data(n,i.extend({},u,e)),t[f].apply(this,[h])):alert(f+" is not a valid method!"))}}}(),f=function(){var t="followButton",f=t+"Id",e={event:"click"},u={init:function(n,t){if(t){this[t]?this[t].apply(this,[n]):alert(t+" is not a valid method!");return}u.bind(n)},bind:function(n){var i=n.data(t).event;if(i)n.on(i,function(t){t.preventDefault();u.handleEvent(n)})},unbind:function(n){var i=n.data(t).event;i&&n.unbind(i)},handleEvent:function(n){var t=this.getAction(n);switch(t){case"subscribe":this.subscribe(n);break;case"unsubscribe":this.unsubscribe(n)}},subscribe:function(t){var i={Id:0,Name:this.getFollowType(t),CreatedUserId:0,ThingId:this.getThingId(t)};r.http({url:n.$.Plato.defaults.pathBase+"/api/follows/follow/post",method:"POST",data:JSON.stringify(i)}).done(function(n){n.statusCode===200&&t.followToggle("enable")})},unsubscribe:function(t){var i={Name:this.getFollowType(t),ThingId:this.getThingId(t)};r.http({url:n.$.Plato.defaults.pathBase+"/api/follows/follow/delete",method:"DELETE",data:JSON.stringify(i)}).done(function(n){n.statusCode===200&&t.followToggle("disable")})},getAction:function(n){var t="subscribe";return n.attr("data-action")&&(t=n.attr("data-action")),t},getFollowType:function(n){var t="";if(n.attr("data-follow-type")&&(t=n.attr("data-follow-type")),t==="")throw new Error("A follow type  is required in order to follow an item.");return t},getThingId:function(n){var t=0;if(n.attr("data-thing-id")&&(t=parseInt(n.attr("data-thing-id"))),t<0)throw new Error("A thing id is required in order to follow an item.");return t}};return{init:function(){for(var o,h,r={},n=null,s=0;s<arguments.length;++s){o=arguments[s];switch(o.constructor){case Object:i.extend(r,o);break;case String:n=o}}if(this.length>0)return this.each(function(){if(i(this).data(f))i(this).data(t,i.extend({},i(this).data(t),r));else{var o=t+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(f,o);i(this).data(t,i.extend({},e,r))}u.init(i(this),n)});n&&(u[n]?(h=i("body"),h.data(t,i.extend({},e,r)),u[n].apply(this,[h])):alert(n+" is not a valid method!"))}}}(),e=function(){var n="followCheckable",r=n+"Id",u={event:"change"},t={init:function(n,i){if(i){this[i]?this[i].apply(this,[n]):alert(i+" is not a valid method!");return}t.bind(n)},bind:function(t){var r=t.data(n).event;if(r)t.on(r,function(n){n.preventDefault();i(this).is(":checked")?t.parent().followToggle("enable"):t.parent().followToggle("disable")})},unbind:function(t){var i=t.data(n).event;i&&t.unbind(i)}};return{init:function(){for(var o,h,e={},f=null,s=0;s<arguments.length;++s){o=arguments[s];switch(o.constructor){case Object:i.extend(e,o);break;case String:f=o}}if(this.length>0)return this.each(function(){if(i(this).data(r))i(this).data(n,i.extend({},i(this).data(n),e));else{var o=n+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(r,o);i(this).data(n,i.extend({},u,e))}t.init(i(this),f)});f&&(t[f]?(h=i("body"),h.data(n,i.extend({},u,e)),t[f].apply(this,[h])):alert(f+" is not a valid method!"))}}}();i.fn.extend({followButton:f.init,followToggle:u.init,followCheckbox:e.init});r.ready(function(){i('[data-provide="follow-button"]').followButton();i('[data-provide="follow-checkbox"]').followCheckbox()})}(window,document,jQuery));